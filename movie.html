<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ðŸŽ¬ CinemaScope</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
<style>
body { margin:0; font-family:'Montserrat', sans-serif; background:#111; color:#fff; scroll-behavior:smooth;}
h1,h2,h3,h4,p { margin:0; padding:0; }
a { text-decoration:none; color:inherit; }

/* Navbar */
nav { position:fixed; top:0; width:100%; display:flex; justify-content:space-between; align-items:center; padding:15px 30px; z-index:1000; background:rgba(0,0,0,0.7); }
nav h1 { font-size:1.8rem; color:crimson; cursor:pointer; }
nav .nav-links { display:flex; flex-wrap:wrap; gap:10px; }
nav .nav-links a { font-weight:600; transition:0.3s; cursor:pointer; padding:5px 10px; color:white; }
nav .nav-links a:hover { color:crimson; }

/* Hero/Landing */
.landing-hero { position:relative; min-height:100vh; display:flex; flex-direction:column; justify-content:center; align-items:center; background:url('movie.jpg') no-repeat center center/cover; text-align:center; padding:0 20px; }
.landing-hero .overlay { position:absolute; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.6); }
.landing-hero .content { position:relative; z-index:1; max-width:900px; color:white; }
.landing-hero h2 { font-size:3rem; margin-bottom:20px; }
.landing-hero p { font-size:1.1rem; margin-bottom:20px; line-height:1.6; }
.landing-hero .btn-container { display:flex; flex-wrap:wrap; justify-content:center; gap:15px; margin-top:10px; }
.btn { background:crimson; color:white; padding:12px 25px; border-radius:8px; font-weight:bold; transition:0.3s; display:inline-block; cursor:pointer;}
.btn:hover { background:darkred; }

/* Sections */
section { padding:60px 20px; max-width:1000px; margin:0 auto; text-align:center; }
section h2 { margin-bottom:20px; color:crimson; }
section p { line-height:1.6; margin-bottom:20px; }
.contact-form { display:flex; flex-direction:column; gap:10px; max-width:400px; margin:0 auto; }
.contact-form input, .contact-form textarea, .contact-form button { padding:10px; border-radius:5px; border:none; font-size:14px; }
.contact-form button { background:crimson; color:#fff; cursor:pointer; font-weight:bold; }
.contact-form button:hover { background:darkred; }

/* Team */
.team-container { display:flex; flex-wrap:wrap; justify-content:center; gap:20px; margin-top:20px;}
.team-member { background:#222; padding:15px; border-radius:8px; width:180px; }
.team-member img { width:100%; border-radius:8px; }

/* Movie Explorer & Cards */
.movie-app { display:none; padding-top:100px; background:#111; min-height:100vh;}
.search-results { display:grid; grid-template-columns:repeat(auto-fill,minmax(140px,1fr)); gap:10px; }
.movie { border-radius:8px; overflow:hidden; background:#222; transition:0.3s; position:relative; cursor:pointer; }
.movie img { width:100%; height:200px; object-fit:cover; }
.movie-info { padding:5px 8px; display:flex; justify-content:space-between; align-items:center; }
.movie-info h3 { font-size:14px; margin:0; }
.movie-info span.green { color:lime; }
.movie-info span.orange { color:orange; }
.movie-info span.red { color:red; }

/* Trending Rows */
.movie-row { display:flex; overflow-x:auto; gap:10px; padding:10px 20px; scroll-behavior:smooth; position:relative; }
.movie-row::-webkit-scrollbar { display:none; }
.row-arrow { position:absolute; top:50%; transform:translateY(-50%); background:rgba(255,0,0,0.7); border:none; padding:10px; color:white; font-size:1.5rem; cursor:pointer; border-radius:50%; z-index:100; }
.row-arrow.left { left:0; }
.row-arrow.right { right:0; }

/* Reviews Cards */
.review-card { background:#222; padding:10px; border-radius:8px; margin:10px; text-align:left; }
.review-card h4 { margin-bottom:5px; color:crimson; font-size:14px; }
.review-card p { font-size:12px; color:white; }

/* Modal */
.modal { 
  display:none; 
  position:fixed; 
  top:60px; 
  left:0; 
  width:100%; 
  max-height:90vh; 
  background:rgba(0,0,0,0.9); 
  z-index:2000; 
  justify-content:center; 
  align-items:flex-start; 
  overflow-y:auto; 
  padding:20px; 
  box-sizing:border-box;
}
.modal-content { 
  background:#111; 
  padding:20px; 
  border-radius:10px; 
  width:90%; 
  max-width:900px; 
  margin:auto;
}
.modal iframe { 
  width:100%; 
  height:300px; 
  max-height:50vh; 
  display:block;
}
#closeModal { position:absolute; top:10px; right:20px; font-size:2rem; cursor:pointer; color:white; }
.navModalBtn { position:absolute; top:50%; transform:translateY(-50%); background:rgba(255,0,0,0.7); border:none; padding:10px; color:white; font-size:1.5rem; cursor:pointer; border-radius:50%; }
#prevMovie { left:-50px; }
#nextMovie { right:-50px; }

/* Search Bar & Load More */
#searchContainer { display:flex; justify-content:center; gap:10px; margin-bottom:20px; flex-wrap:wrap; }
#searchContainer input { padding:10px; border-radius:5px; border:none; width:250px; font-size:14px; }
#searchContainer button { padding:10px 20px; background:crimson; border:none; border-radius:5px; color:#fff; cursor:pointer; transition:0.3s; font-weight:bold;}
#searchContainer button:hover{background:darkred;}

/* Wishlist */
#wishlistPage { display:none; background:#111; min-height:100vh; padding:100px 20px; text-align:center; }
.wishlist-options { display:flex; flex-wrap:wrap; justify-content:center; gap:15px; margin-bottom:40px; }
.wishlist-options button { padding:12px 20px; background:crimson; border:none; border-radius:8px; font-weight:bold; color:white; cursor:pointer; transition:0.3s; }
.wishlist-options button:hover { background:darkred; }
#wishlistResult { font-size:1.3rem; color:lime; margin-bottom:20px; }

/* Responsive */
@media(max-width:768px){ 
    .movie { min-width:120px; } 
    .team-container { flex-direction:column; align-items:center; } 
    .landing-hero h2 { font-size:2rem; }
    .landing-hero p { font-size:1rem; }
    .btn { padding:10px 15px; font-size:14px;}
    #searchContainer input{width:150px;}
    #prevMovie { left:10px; }
    #nextMovie { right:10px; }
    .row-arrow.left { left:5px; }
    .row-arrow.right { right:5px; }
}
</style>
</head>
<body>

<!-- Navbar -->
<nav id="navbar">
  <h1 onclick="goHome()">ðŸŽ¬ CinemaScope</h1>
  <div class="nav-links">
    <a href="#" onclick="showApp()">Explore</a>
    <a href="#" onclick="showWishlist()">Wishlist</a>
  </div>
</nav>

<!-- Landing Page -->
<div id="landingPage">

  <section class="landing-hero">
    <div class="overlay"></div>
    <div class="content">
      <h2>Welcome to CinemaScope</h2>
      <p>Discover ratings, reviews, and decide your next movie night pick! Explore trending movies across genres, read public reviews, and create your personal wishlist of favorite movies.</p>
      <div class="btn-container">
        <button class="btn" onclick="showApp()">Start Exploring</button>
        <button class="btn" onclick="showWishlist()">Wishlist</button>
      </div>
    </div>
  </section>

  <!-- Trending Movies Today -->
  <section id="trendingToday">
    <h2>ðŸŽ¬ Top Movies Today</h2>
    <div class="movie-row" id="todayRow"></div>
    <button class="row-arrow left" onclick="scrollRow('todayRow', -1)">&#10094;</button>
    <button class="row-arrow right" onclick="scrollRow('todayRow', 1)">&#10095;</button>
  </section>

  <!-- Trending Movies Week -->
  <section id="trendingWeek">
    <h2>ðŸŽ¬ Top Movies This Week</h2>
    <div class="movie-row" id="weekRow"></div>
    <button class="row-arrow left" onclick="scrollRow('weekRow', -1)">&#10094;</button>
    <button class="row-arrow right" onclick="scrollRow('weekRow', 1)">&#10095;</button>
  </section>

  <!-- About / Contact / Team -->
  <section id="about">
    <h2>About Us</h2>
    <p>Our team is passionate about cinema and committed to making movie discovery easy and enjoyable. We provide trending movies, public reviews, and personalized recommendations.</p>
  </section>

  <section id="contact">
    <h2>Contact Us</h2>
    <form class="contact-form">
      <input type="text" placeholder="Your Name" required />
      <input type="email" placeholder="Your Email" required />
      <textarea rows="4" placeholder="Your Message" required></textarea>
      <button type="submit">Send Message</button>
    </form>
  </section>

  <section id="team">
    <h2>Meet the Team</h2>
    <div class="team-container">
      <div class="team-member"><img src="IMG-20241023-WA0029.jpg"><h3>Karan - SE3 Roll 66</h3></div>
      <div class="team-member"><img src="IMG_20250928_205237.jpg"><h3>Suresh - SE3 Roll 3</h3></div>
      <div class="team-member"><img src="IMG_20250928_204711.jpg"><h3>Aditya - SE3 Roll 51</h3></div>
      <div class="team-member"><img src="IMG_20250928_204522.jpg"><h3>Hariom - SE3 Roll 65</h3></div>
    </div>
  </section>

</div>

<!-- Movie Explorer -->
<div class="movie-app" id="movieApp">
  <div id="searchContainer">
    <input type="text" id="searchInput" placeholder="Search movies...">
    <button onclick="searchMovie()">Search</button>
  </div>
  <main id="main" class="search-results"></main>
  <div style="text-align:center; margin:20px;">
    <button id="loadMoreBtn" class="btn" onclick="loadMoreMovies()" style="padding:10px 20px;">Load More</button>
  </div>
</div>

<!-- Wishlist -->
<section id="wishlistPage">
  <h2>ðŸŽ¯ Build Your Wishlist</h2>
  <div id="wishlistResult"></div>
  <div class="movie-row" id="wishlistMovies"></div>
</section>

<!-- Modal -->
<div class="modal" id="modal">
  <div class="modal-content">
    <span id="closeModal">&times;</span>
    <button class="navModalBtn" id="prevMovie">&#10094;</button>
    <button class="navModalBtn" id="nextMovie">&#10095;</button>
    <div id="modalDetails"></div>
  </div>
</div>

<script>
const KEY="3fd2be6f0c70a2a598f084ddfb75487c";
const IMG_PATH="https://image.tmdb.org/t/p/w500";
const main=document.getElementById("main");
const landing=document.getElementById("landingPage");
const movieApp=document.getElementById("movieApp");
const searchInput=document.getElementById('searchInput');

let currentMovieList=[], currentMovieIndex=0;
let wishlist=[];
let currentPage = 1;
let currentQuery = "";

// Helper
function getClassByRate(vote){ return vote>=7.5?"green":vote>=7?"orange":"red"; }
function stopTrailer(){ const iframe= document.querySelector('#modal iframe'); if(iframe) iframe.src=''; }

// Show Pages
async function showApp(){ 
  landing.style.display="none"; 
  movieApp.style.display="block"; 
  document.getElementById("wishlistPage").style.display="none"; 
  main.innerHTML="<p style='color:white;'>Loading movies...</p>";

  currentPage = 1;
  currentQuery = "";

  try{
    const res=await fetch(`https://api.themoviedb.org/3/trending/movie/week?api_key=${KEY}&page=${currentPage}`);
    const data=await res.json();
    const movies=data.results.slice(0,30);
    main.innerHTML="";
    movies.forEach(movie=>{
      const {id,title,poster_path,vote_average}=movie;
      const movieCard=document.createElement("div"); 
      movieCard.classList.add("movie");
      movieCard.innerHTML=`
        <img src="${poster_path?IMG_PATH+poster_path:'https://via.placeholder.com/140x200'}" alt="${title}">
        <div class="movie-info">
          <h3>${title}</h3>
          <span class="${getClassByRate(vote_average)}">${vote_average}</span>
        </div>`;
      main.appendChild(movieCard);
      attachCardClick(movieCard,movie,movies);
    });
  }catch(e){ main.innerHTML="<p style='color:white;'>Failed to load movies.</p>"; console.error(e);}
}

function goHome(){ 
  landing.style.display="block"; 
  movieApp.style.display="none"; 
  document.getElementById("wishlistPage").style.display="none"; 
  stopTrailer(); 
}
function showWishlist(){ 
  landing.style.display="none"; 
  movieApp.style.display="none"; 
  document.getElementById("wishlistPage").style.display="block"; 
}

// Wishlist
function addToWishlist(movie){
  if(!wishlist.find(m=>m.id===movie.id)){
    wishlist.push(movie);
    renderWishlist();
  }
}
function renderWishlist(){
  const wishlistDiv=document.getElementById("wishlistMovies");
  wishlistDiv.innerHTML="";
  wishlist.forEach(movie=>{
    wishlistDiv.innerHTML+=`
      <div class="movie">
        <img src="${movie.poster_path?IMG_PATH+movie.poster_path:'https://via.placeholder.com/140x200'}" alt="${movie.title}">
        <div class="movie-info">
          <h3>${movie.title}</h3>
          <span class="${getClassByRate(movie.vote_average)}">${movie.vote_average}</span>
        </div>
      </div>`;
  });
  document.getElementById("wishlistResult").innerText = wishlist.length>0 ? "Your Wishlist:" : "No movies added yet!";
}

// Trending
async function fetchTrending(time='day', rowId){
  const row=document.getElementById(rowId); row.innerHTML="<p style='color:white;'>Loading...</p>";
  try{
    const res=await fetch(`https://api.themoviedb.org/3/trending/movie/${time}?api_key=${KEY}`);
    const data=await res.json(); const movies=data.results.slice(0,10); row.innerHTML="";
    movies.forEach(movie=>{
      const {id,title,poster_path,vote_average}=movie;
      const movieCard=document.createElement("div"); movieCard.classList.add("movie");
      movieCard.innerHTML=`<img src="${poster_path?IMG_PATH+poster_path:'https://via.placeholder.com/140x200'}" alt="${title}"><div class="movie-info"><h3>${title}</h3><span class="${getClassByRate(vote_average)}">${vote_average}</span></div>`;
      row.appendChild(movieCard); attachCardClick(movieCard, movie, movies);
    });
  }catch(e){ row.innerHTML="<p style='color:white;'>Failed to load trending movies.</p>"; console.error(e);}
}
fetchTrending('day','todayRow'); fetchTrending('week','weekRow');

// Row scrolling
function scrollRow(rowId, dir){
  const row=document.getElementById(rowId);
  row.scrollBy({left:dir*300, behavior:'smooth'});
}

// Modal
const modal=document.getElementById('modal'); const modalDetails=document.getElementById('modalDetails');
document.getElementById('closeModal').addEventListener('click',()=>{ modal.style.display='none'; stopTrailer(); });
document.getElementById('prevMovie').addEventListener('click',()=>{ currentMovieIndex=(currentMovieIndex-1+currentMovieList.length)%currentMovieList.length; showMovieDetails(currentMovieList[currentMovieIndex].id); });
document.getElementById('nextMovie').addEventListener('click',()=>{ currentMovieIndex=(currentMovieIndex+1)%currentMovieList.length; showMovieDetails(currentMovieList[currentMovieIndex].id); });
window.onclick = function(event){ if(event.target==modal) { modal.style.display='none'; stopTrailer(); } }

function attachCardClick(card,movie,list){ card.addEventListener('click',()=>{ currentMovieList=list; currentMovieIndex=list.findIndex(m=>m.id===movie.id); showMovieDetails(movie.id); }); }

// Show Movie Details
async function showMovieDetails(id){
  try{
    const res=await fetch(`https://api.themoviedb.org/3/movie/${id}?api_key=${KEY}&append_to_response=videos,reviews`);
    const data=await res.json(); 
    const {title,poster_path,vote_average,overview,reviews,videos}=data;
    const trailer = videos.results.find(v=>v.type==="Trailer");

    modalDetails.innerHTML=`
      <div style="display:flex;gap:20px; flex-wrap:wrap;">
        <img src="${poster_path?IMG_PATH+poster_path:'https://via.placeholder.com/200x300'}" alt="${title}" style="width:200px; border-radius:8px;">
        <div style="flex:1;">
          <h2>${title}</h2>
          <p>Rating: <span class="${getClassByRate(vote_average)}">${vote_average}</span></p>
          <p>${overview}</p>
          <button class="wishlist-btn" onclick="addToWishlist({id:${id},title:'${title.replace(/'/g,"\\'")}',poster_path:'${poster_path}',vote_average:${vote_average}})">âž• Add to Wishlist</button>
        </div>
      </div>
      <h3>Reviews:</h3>
      <div style="max-height:200px; overflow-y:auto;">
        ${reviews.results.length?reviews.results.map(r=>`<div class="review-card"><h4>${r.author}</h4><p>${r.content.slice(0,200)}...</p></div>`).join(""):"<p>No reviews yet.</p>"}
      </div>
      <h3>Trailer:</h3>
      ${trailer?`<iframe width="100%" height="300" src="https://www.youtube.com/embed/${trailer.key}" frameborder="0" allowfullscreen></iframe>
      <button onclick="stopTrailer(); modal.style.display='none';" style="margin-top:10px; padding:10px 15px; background:crimson; border:none; border-radius:5px; color:#fff; cursor:pointer;">Cancel Trailer</button>`:"<p>No trailer available</p>"}
    `;
    modal.style.display='flex';
  }catch(e){ console.error("Error loading movie details", e);}
}

// Search
async function searchMovie(){
  const query = searchInput.value.trim(); 
  if(!query) return;
  currentQuery = query; 
  currentPage = 1;
  main.innerHTML="<p style='color:white;'>Searching...</p>";

  try{
    const res=await fetch(`https://api.themoviedb.org/3/search/movie?api_key=${KEY}&query=${encodeURIComponent(query)}&page=${currentPage}`);
    const data=await res.json();
    if(data.results.length===0){ main.innerHTML="<p style='color:white;'>No results found</p>"; return;}
    main.innerHTML=""; currentMovieList=data.results;
    data.results.forEach(movie=>{
      const {id,title,poster_path,vote_average}=movie;
      const movieCard=document.createElement("div"); movieCard.classList.add("movie");
      movieCard.innerHTML=`<img src="${poster_path?IMG_PATH+poster_path:'https://via.placeholder.com/140x200'}" alt="${title}"><div class="movie-info"><h3>${title}</h3><span class="${getClassByRate(vote_average)}">${vote_average}</span></div>`;
      main.appendChild(movieCard); attachCardClick(movieCard,movie,data.results);
    });
  }catch(e){ main.innerHTML="<p style='color:white;'>Failed to search</p>"; console.error(e);}
}

// Load More
async function loadMoreMovies(){
  currentPage++;
  main.insertAdjacentHTML('beforeend', `<p style="color:white;">Loading more...</p>`);

  try{
    let url;
    if(currentQuery){
      url = `https://api.themoviedb.org/3/search/movie?api_key=${KEY}&query=${encodeURIComponent(currentQuery)}&page=${currentPage}`;
    } else {
      url = `https://api.themoviedb.org/3/trending/movie/week?api_key=${KEY}&page=${currentPage}`;
    }
    const res = await fetch(url);
    const data = await res.json();
    const movies = data.results;
    if(movies.length===0){
      document.getElementById("loadMoreBtn").innerText="No more movies";
      return;
    }

    main.querySelector('p:last-child')?.remove();
    movies.forEach(movie=>{
      const {id,title,poster_path,vote_average}=movie;
      const movieCard=document.createElement("div"); 
      movieCard.classList.add("movie");
      movieCard.innerHTML=`
        <img src="${poster_path?IMG_PATH+poster_path:'https://via.placeholder.com/140x200'}" alt="${title}">
        <div class="movie-info">
          <h3>${title}</h3>
          <span class="${getClassByRate(vote_average)}">${vote_average}</span>
        </div>`;
      main.appendChild(movieCard);
      attachCardClick(movieCard,movie,movies);
    });
  }catch(e){ console.error("Failed to load more movies", e);}
}
</script>
</body>
</html>
